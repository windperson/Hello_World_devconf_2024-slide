## BenchmarkDotNet Intro {.center}

## What is BenchmarkDotNET?

**BenchmarkDotNet(_BDN_)**: .NET library for benchmarking you C#/F#/VB code. <br/>![web site loge](./BDN_tutorial/pics/logo-wide.png)

* MIT License
* GitHub: <https://github.com/dotnet/BenchmarkDotNet>
* Homepage: <https://benchmarkdotnet.org/>
* .NET foundation project: <https://dotnetfoundation.org/projects/benchmarkdotnet>

## BDN can help you to:

* Easily writing micro & macro benchmarks for your code. 
* Measure the performance of your code.
* Compare the performance of your code on different environments  
   (x86 v.s. x64, .NET Framework/.NET Core/.NET 5+/Mono, different JIT).
* Generate markdown, CSV, JSON, HTML, reports / png plots.

## Microbenchmark / Macrobenchmark / Profiling

- **Microbenchmark**:  
   Measure the performance of a small piece of code.
- **Macrobenchmark**:  
   Measure the performance of a large piece of code.
- **Profiling**:  
   Measure the performance of a whole application.

## {.smaller}

:::: {.columns}

::: {.column width="33%"}
![](./BDN_tutorial/pics/microscope-2-svgrepo-com.svg)

[System.Diagnostics.Stopwatch](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.stopwatch), BenchmarkDotNET, NBench

:::

::: {.column width="33%"}
![](./BDN_tutorial/pics/telescope-2-svgrepo-com.svg)

BenchmarkDotNET(partial), JMeter, Vegeta, Bombardier

:::

::: {.column width="33%"}
![](./BDN_tutorial/pics/protractor-svgrepo-com.svg)

dotTrace, dotMemory, PerfView, PerfMon, Windows Performance Recorder

:::

::::      

## A decent Benchmark procedure

```{mermaid}
flowchart LR
  A[prepare] ==> B("<b>GlobalSetup</b>")
  B ==> C("<b>Warmup</b>")
  C ==> D[["<b>Iteration</b>"]]
  E1 --erroneous<br/>execution--x X[/Outliner/]
  D ==> F(GlobalCleanup)
  F ==> G((("collect result")))
  D -.-> E1(["<b><code>Invocation</code></b>"])
  D -.-> E1(["<b><code>Invocation</code></b>"])
  D -.-> E1(["<b><code>Invocation</code></b>"])
  D -.-> E1(["<b><code>Invocation</code></b>"])
  D -.-> E1(["<b><code>Invocation</code></b>"])
```

How many Invocations(_operation count_) is determined by the `PIlot` .