<!DOCTYPE html>
<html lang="en"><head>
<script src="index_files/libs/clipboard/clipboard.min.js"></script>
<script src="index_files/libs/quarto-html/tabby.min.js"></script>
<script src="index_files/libs/quarto-html/popper.min.js"></script>
<script src="index_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="index_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="index_files/libs/quarto-html/light-border.css" rel="stylesheet">
<link href="index_files/libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="index_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.5.57">

  <meta name="author" content="老鮑伯">
  <title>BenchmarkDotNET 科學化 .NET 應用效能調校</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="index_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="index_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; font-weight: bold; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="index_files/libs/revealjs/dist/theme/quarto.css">
  <link href="index_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="index_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="index_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="index_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    padding-bottom: 0.5rem;
    margin-bottom: 0;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
  <script src="index_files/libs/quarto-diagram/mermaid.min.js"></script>
  <script src="index_files/libs/quarto-diagram/mermaid-init.js"></script>
  <link href="index_files/libs/quarto-diagram/mermaid.css" rel="stylesheet">
  <style>
  .center-xy {
  margin: 0;
  position: absolute;
  top: 50%;
  left: 50%;
  -ms-transform: translateY(-50%), translateX(-50%);
  transform: translateY(-50%), translateX(-50%);
  }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">BenchmarkDotNET<br>科學化 .NET 應用效能調校</h1>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
老鮑伯 
</div>
</div>
</div>

</section>
<section id="agenda" class="title-slide slide level1 center">
<h1>Agenda</h1>
<div class="columns">
<div class="column" style="width:80%;">
<ol type="1">
<li>BenchmarkDotNET 入門<br>
</li>
<li>多種 C＃ 開發應用場景<br>(ASP.NET Core Web API/gRPC/Orleans, Blazor, ONNX Runtime, MAUI, WPF, Godot Game Engine)<br>使用 BenchmarkDotNET</li>
<li>整合 BenchmarkDotNET 到 GitHub Action CI</li>
</ol>
</div><div class="column" style="width:20%;">
<div style="text-align: center;">
<img src="./pics/slide_url.svg" srcset="./pics/slide_url.png" width="200" height="200" style="vertical-align: middle"><br>Slide URL
</div>
</div></div>
</section>

<section>
<section id="benchmarkdotnet-入門" class="title-slide slide level1 center">
<h1>BenchmarkDotNET 入門</h1>

</section>
<section id="what-is-benchmarkdotnet" class="slide level2">
<h2>What is BenchmarkDotNET?</h2>
<p><strong>BenchmarkDotNet</strong>(<strong><em>BDN</em></strong>): .NET library for benchmarking you C#/F#/VB code. <br><img data-src="./BDN_tutorial/pics/logo-wide.png" alt="web site loge"></p>
<ul>
<li>MIT License</li>
<li>GitHub: <a href="https://github.com/dotnet/BenchmarkDotNet" class="uri">https://github.com/dotnet/BenchmarkDotNet</a></li>
<li>Homepage: <a href="https://benchmarkdotnet.org/" class="uri">https://benchmarkdotnet.org/</a></li>
<li>.NET foundation project: <a href="https://dotnetfoundation.org/projects/benchmarkdotnet" class="uri">https://dotnetfoundation.org/projects/benchmarkdotnet</a></li>
</ul>
</section>
<section id="bdn-can-help-you-to" class="slide level2">
<h2>BDN can help you to:</h2>
<ul>
<li>Easily writing micro &amp; macro benchmarks for your code.</li>
<li>Measure the performance of your code.</li>
<li>Compare the performance of your code on different environments<br>
(x86 v.s. x64, .NET Framework/.NET Core/.NET 5+/Mono, different JITs).</li>
<li>Generate markdown, CSV, JSON, HTML, reports / png plots.</li>
</ul>
</section>
<section id="microbenchmark-macrobenchmark-profiling" class="slide level2">
<h2>Microbenchmark / Macrobenchmark / Profiling</h2>
<ul>
<li><strong>Microbenchmark</strong>:<br>
Measure the performance of a small piece of code.</li>
<li><strong>Macrobenchmark</strong>:<br>
Measure the performance of a large piece of code.</li>
<li><strong>Profiling</strong>:<br>
Measure the performance of a whole application.</li>
</ul>
</section>
<section id="section" class="slide level2 smaller">
<h2></h2>
<div class="columns">
<div class="column" style="width:33%;">
<h3 class="center" id="microbenchmark"><em>Microbenchmark</em></h3>
<p><img data-src="./BDN_tutorial/pics/microscope-2-svgrepo-com.svg"></p>
<p><a href="https://learn.microsoft.com/dotnet/api/system.diagnostics.stopwatch">System.Diagnostics.Stopwatch</a>, BenchmarkDotNET, NBench</p>
</div><div class="column" style="width:33%;">
<h3 class="center" id="macrobenchmark"><em>Macrobenchmark</em></h3>
<p><img data-src="./BDN_tutorial/pics/telescope-2-svgrepo-com.svg"></p>
<p>BenchmarkDotNET(partial), JMeter, Vegeta, Bombardier</p>
</div><div class="column" style="width:33%;">
<h3 class="center" id="profiling"><em>Profiling</em></h3>
<p><img data-src="./BDN_tutorial/pics/protractor-svgrepo-com.svg"></p>
<p>dotTrace, dotMemory, PerfView, PerfMon, Windows Performance Recorder</p>
</div></div>
</section>
<section id="a-decent-benchmark-workflow" class="slide level2">
<h2>A decent Benchmark workflow</h2>
<p><br><br></p>
<div class="cell" data-reveal="true" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class=""><p></p>
<div>
<pre class="mermaid mermaid-js">flowchart LR
  A[prepare] ==&gt; B("&lt;em&gt;&lt;b&gt;GlobalSetup&lt;/b&gt;&lt;/em&gt;")
  B ==&gt; C("&lt;em&gt;&lt;b&gt;Warmup&lt;/b&gt;&lt;/em&gt;")
  C ==&gt; D[["🔁&lt;em&gt;&lt;b&gt;Iteration&lt;/b&gt;&lt;/em&gt;"]]
  E1 --erroneous&lt;br/&gt;execution--x X[/"&lt;em&gt;Outliner&lt;/em&gt;&lt;br/&gt;❌"/]
  D ===&gt; F("&lt;em&gt;&lt;b&gt;GlobalCleanup&lt;/b&gt;&lt;/em&gt;")
  F ==&gt; G((("collect result&lt;br/&gt;📈")))
  D -.-&gt; E1(["&lt;em&gt;&lt;b&gt;Invocation&lt;/b&gt;&lt;/em&gt;&lt;br/&gt;(measure time🕥)"])
  E1 -.-&gt; D
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
<ul>
<li>Warmup is for warming up the JIT compiler (eq. <a href="https://devblogs.microsoft.com/dotnet/performance-improvements-in-ryujit-in-net-core-and-net-framework/">RyuJIT</a>) or let <a href="https://learn.microsoft.com/dotnet/framework/tools/ngen-exe-native-image-generator">Ngen.exe</a> to create native images, or <a href="https://github.com/dotnet/runtime/blob/main/docs/design/features/tiered-compilation.md">Tired Compilation</a> stick to a steady state.</li>
<li>How many Invocations(<em>operation count</em>) is determined by a <code>PIlot</code> procedure.<br>
</li>
<li>BenchmarkDotNET provides above workflow for you.</li>
</ul>
</section>
<section id="a-hello-world-example" class="slide level2 smaller">
<h2>A Hello World example</h2>
<p>We can build a quick Hello world example using <a href="https://dotnet.microsoft.com/download">.NET SDK</a> with <a href="https://benchmarkdotnet.org/articles/guides/dotnet-new-templates.html">BenchmarkDotNET templates</a>.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode numberSource shell number-lines code-with-copy"><code class="sourceCode"><span id="cb1-1"><a href=""></a>dotnet new -i BenchmarkDotNet.Templates</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<img data-src="./BDN_tutorial/pics/install_BDN_template.png" class="r-stretch">
</section>
<section id="section-1" class="slide level2">
<h2></h2>
<p>Generate a new Benchmark project:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode numberSource shell number-lines code-with-copy"><code class="sourceCode"><span id="cb2-1"><a href=""></a>dotnet new benchmark -n HelloBDN</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

<img data-src="./BDN_tutorial/pics/create_BDN_project.png" class="r-stretch"></section>
<section id="section-2" class="slide level2">
<h2></h2>
<p>Generated <code>HelloBDN.csproj</code> file:</p>
<div class="sourceCode" id="cb3" data-code-line-numbers="12,16,17"><pre class="sourceCode numberSource xml number-lines code-with-copy"><code class="sourceCode xml"><span id="cb3-1"><a href=""></a>&lt;<span class="kw">Project</span><span class="ot"> Sdk=</span><span class="st">"Microsoft.NET.Sdk"</span>&gt;</span>
<span id="cb3-2"><a href=""></a>  &lt;<span class="kw">PropertyGroup</span>&gt;</span>
<span id="cb3-3"><a href=""></a>    &lt;<span class="kw">TargetFramework</span>&gt;net8.0&lt;/<span class="kw">TargetFramework</span>&gt;</span>
<span id="cb3-4"><a href=""></a>    &lt;<span class="kw">OutputType</span>&gt;Exe&lt;/<span class="kw">OutputType</span>&gt;</span>
<span id="cb3-5"><a href=""></a>  &lt;/<span class="kw">PropertyGroup</span>&gt;</span>
<span id="cb3-6"><a href=""></a>  &lt;<span class="kw">PropertyGroup</span>&gt;</span>
<span id="cb3-7"><a href=""></a>    &lt;<span class="kw">PlatformTarget</span>&gt;AnyCPU&lt;/<span class="kw">PlatformTarget</span>&gt;</span>
<span id="cb3-8"><a href=""></a>    &lt;<span class="kw">DebugType</span>&gt;pdbonly&lt;/<span class="kw">DebugType</span>&gt;</span>
<span id="cb3-9"><a href=""></a>    &lt;<span class="kw">DebugSymbols</span>&gt;true&lt;/<span class="kw">DebugSymbols</span>&gt;</span>
<span id="cb3-10"><a href=""></a>    &lt;<span class="kw">AllowUnsafeBlocks</span>&gt;true&lt;/<span class="kw">AllowUnsafeBlocks</span>&gt;</span>
<span id="cb3-11"><a href=""></a>    &lt;<span class="kw">Optimize</span>&gt;true&lt;/<span class="kw">Optimize</span>&gt;</span>
<span id="cb3-12"><a href=""></a>    &lt;<span class="kw">Configuration</span>&gt;Release&lt;/<span class="kw">Configuration</span>&gt;</span>
<span id="cb3-13"><a href=""></a>    &lt;<span class="kw">IsPackable</span>&gt;false&lt;/<span class="kw">IsPackable</span>&gt;</span>
<span id="cb3-14"><a href=""></a>  &lt;/<span class="kw">PropertyGroup</span>&gt;</span>
<span id="cb3-15"><a href=""></a>  &lt;<span class="kw">ItemGroup</span>&gt;</span>
<span id="cb3-16"><a href=""></a>    &lt;<span class="kw">PackageReference</span><span class="ot"> Include=</span><span class="st">"BenchmarkDotNet"</span><span class="ot"> Version=</span><span class="st">"0.14.0"</span> /&gt;</span>
<span id="cb3-17"><a href=""></a>    &lt;<span class="kw">PackageReference</span><span class="ot"> Include=</span><span class="st">"BenchmarkDotNet.Diagnostics.Windows"</span><span class="ot"> Version=</span><span class="st">"0.14.0"</span>/&gt;</span>
<span id="cb3-18"><a href=""></a>  &lt;/<span class="kw">ItemGroup</span>&gt;</span>
<span id="cb3-19"><a href=""></a>&lt;/<span class="kw">Project</span>&gt;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>By default, BDN will need project to be run as <code>Release</code> mode.</li>
<li>The <code>BenchmarkDotNet.Diagnostics.Windows</code> package is for Windows OS.</li>
</ul>
</section>
<section id="section-3" class="slide level2">
<h2></h2>
<p>Generated <code>Benchmarks.cs</code> file:</p>
<div class="sourceCode" id="cb4" data-code-line-numbers="9-19"><pre class="sourceCode numberSource csharp number-lines code-with-copy"><code class="sourceCode cs"><span id="cb4-1"><a href=""></a><span class="kw">using</span> System<span class="op">;</span></span>
<span id="cb4-2"><a href=""></a><span class="kw">using</span> BenchmarkDotNet<span class="op">;</span></span>
<span id="cb4-3"><a href=""></a><span class="kw">using</span> BenchmarkDotNet<span class="op">.</span><span class="fu">Attributes</span><span class="op">;</span></span>
<span id="cb4-4"><a href=""></a></span>
<span id="cb4-5"><a href=""></a><span class="kw">namespace</span> HelloBDN</span>
<span id="cb4-6"><a href=""></a><span class="op">{</span></span>
<span id="cb4-7"><a href=""></a>    <span class="kw">public</span> <span class="kw">class</span> Benchmarks</span>
<span id="cb4-8"><a href=""></a>    <span class="op">{</span></span>
<span id="cb4-9"><a href=""></a>        <span class="op">[</span>Benchmark<span class="op">]</span></span>
<span id="cb4-10"><a href=""></a>        <span class="kw">public</span> <span class="dt">void</span> <span class="fu">Scenario1</span><span class="op">()</span></span>
<span id="cb4-11"><a href=""></a>        <span class="op">{</span></span>
<span id="cb4-12"><a href=""></a>            <span class="co">// Implement your benchmark here</span></span>
<span id="cb4-13"><a href=""></a>        <span class="op">}</span></span>
<span id="cb4-14"><a href=""></a></span>
<span id="cb4-15"><a href=""></a>        <span class="op">[</span>Benchmark<span class="op">]</span></span>
<span id="cb4-16"><a href=""></a>        <span class="kw">public</span> <span class="dt">void</span> <span class="fu">Scenario2</span><span class="op">()</span></span>
<span id="cb4-17"><a href=""></a>        <span class="op">{</span></span>
<span id="cb4-18"><a href=""></a>            <span class="co">// Implement your benchmark here</span></span>
<span id="cb4-19"><a href=""></a>        <span class="op">}</span></span>
<span id="cb4-20"><a href=""></a>    <span class="op">}</span></span>
<span id="cb4-21"><a href=""></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><a href="https://benchmarkdotnet.org/api/BenchmarkDotNet.Attributes.BenchmarkAttribute.html"><code>[Benchmark]</code></a> attribute marks a method as a benchmark case, it will got “Invocation” multiple times and BDN will collect its execution time, calculate.</li>
</ul>
</section>
<section id="section-4" class="slide level2">
<h2></h2>
<p>Generated <code>Program.cs</code> file:</p>
<div class="sourceCode" id="cb5" data-code-line-numbers="10-14"><pre class="sourceCode numberSource csharp number-lines code-with-copy"><code class="sourceCode cs"><span id="cb5-1"><a href=""></a><span class="kw">using</span> BenchmarkDotNet<span class="op">.</span><span class="fu">Configs</span><span class="op">;</span></span>
<span id="cb5-2"><a href=""></a><span class="kw">using</span> BenchmarkDotNet<span class="op">.</span><span class="fu">Running</span><span class="op">;</span></span>
<span id="cb5-3"><a href=""></a></span>
<span id="cb5-4"><a href=""></a><span class="kw">namespace</span> HelloBDN</span>
<span id="cb5-5"><a href=""></a><span class="op">{</span></span>
<span id="cb5-6"><a href=""></a>    <span class="kw">public</span> <span class="kw">class</span> Program</span>
<span id="cb5-7"><a href=""></a>    <span class="op">{</span></span>
<span id="cb5-8"><a href=""></a>        <span class="kw">public</span> <span class="kw">static</span> <span class="dt">void</span> <span class="fu">Main</span><span class="op">(</span><span class="dt">string</span><span class="op">[]</span> args<span class="op">)</span></span>
<span id="cb5-9"><a href=""></a>        <span class="op">{</span></span>
<span id="cb5-10"><a href=""></a>            <span class="dt">var</span> config <span class="op">=</span> DefaultConfig<span class="op">.</span><span class="fu">Instance</span><span class="op">;</span></span>
<span id="cb5-11"><a href=""></a>            <span class="dt">var</span> summary <span class="op">=</span> BenchmarkRunner<span class="op">.</span><span class="fu">Run</span><span class="op">&lt;</span>Benchmarks<span class="op">&gt;(</span>config<span class="op">,</span> args<span class="op">);</span></span>
<span id="cb5-12"><a href=""></a></span>
<span id="cb5-13"><a href=""></a>            <span class="co">// Use this to select benchmarks from the console:</span></span>
<span id="cb5-14"><a href=""></a>            <span class="co">// var summaries = BenchmarkSwitcher.FromAssembly(typeof(Program).Assembly).Run(args, config);</span></span>
<span id="cb5-15"><a href=""></a>        <span class="op">}</span></span>
<span id="cb5-16"><a href=""></a>    <span class="op">}</span></span>
<span id="cb5-17"><a href=""></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><code>BenchmarkRunner.Run&lt;Benchmarks&gt;(config, args)</code> will run all benchmarks in <code>Benchmarks</code> class.</li>
<li>If you need to tweak the BDN running benchmark behavior, you can create a custom <code>IConfig</code> class or using fluid API style to create config object and use it in <code>BenchmarkRunner.Run&lt;T&gt;()</code> method.</li>
</ul>
</section>
<section id="run-the-benchmark" class="slide level2">
<h2>Run the benchmark</h2>
<p>Inside project folder, run:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode numberSource shell number-lines code-with-copy"><code class="sourceCode"><span id="cb6-1"><a href=""></a>dotnet run -c Release</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="r-stack">
<div class="fragment">
<p><img data-src="./BDN_tutorial/pics/running_HelloBDN_project-1.png"></p>
</div>
<div class="fragment fade-in">
<p><img data-src="./BDN_tutorial/pics/running_HelloBDN_project-2.png"></p>
</div>
</div>
</section>
<section id="benchmarkdotnet-report" class="slide level2">
<h2>BenchmarkDotNET report</h2>
<p>After running the benchmark, BDN will generate a report in the console, and also generate report file(s) in <code>BenchmarkDotNet.Artifacts/results</code> folder.</p>
<p><img data-src="./BDN_tutorial/pics/BDN_project_report_location.png"></p>
<p><img data-src="./BDN_tutorial/pics/BDN_project_html_report.png"></p>
<p>So we achieved a quick benchmark demo with BenchmarkDotNET.</p>
</section>
<section id="bdn-mechanism" class="slide level2 small scrollable">
<h2>BDN mechanism</h2>
<p>When we run the benchmark, <a href="https://benchmarkdotnet.org/articles/guides/how-it-works.html">BDN do the following steps</a>:</p>
<ol type="1">
<li>BenchmarkRunner generates an isolated project per each runtime settings and builds it in Release mode.</li>
<li>Next, we take each method/job/params combination and try to measure its performance by launching benchmark process several times (LaunchCount).</li>
<li>An invocation of the workload method is an operation. A bunch of operation is an iteration. If you have an IterationSetup method, it will be invoked before each iteration, but not between operations. We have the following type of iterations:
<ul>
<li>Pilot: The best operation count will be chosen.</li>
<li>OverheadWarmup, OverheadWorkload: BenchmarkDotNet overhead will be evaluated.</li>
<li>ActualWarmup: Warmup of the workload method.</li>
<li>ActualWorkload: Actual measurements.</li>
<li>Result = ActualWorkload - &lt;MedianOverhead&gt;</li>
</ul></li>
<li>After all of the measurements, BenchmarkDotNet creates:
<ul>
<li>An instance of the Summary class that contains all information about benchmark runs.</li>
<li>A set of files that contains summary in human-readable and machine-readable formats.</li>
<li>A set of plots.</li>
</ul></li>
</ol>
</section>
<section id="microbenchmark-example-project" class="slide level2">
<h2>Microbenchmark example project</h2>
<p>A microbenchmark example with BDN to prove characteristic of four Fibonacci Sequence generate algorithm:</p>
<ul>
<li>Simple Loop (<strong><em>O(n)</em></strong>)</li>
<li>Recursion (<strong><em>O(2^n)</em></strong>)</li>
<li><a href="https://www.wikihow.com/Calculate-the-Fibonacci-Sequence#Using-Binet.27s-Formula-and-the-Golden-Ratio">Golden Ration math formula</a> (approximation, <strong><em>O(1)</em></strong>)</li>
<li><a href="https://www.nayuki.io/page/fast-fibonacci-algorithms">Matrix exponentiation</a> (<strong><em>O(log(n))</em></strong>)</li>
<li><a href="https://www.nayuki.io/page/fast-fibonacci-algorithms">Fast doubling</a> (<strong><em>O(log(n))</em></strong>)</li>
</ul>
<p>Source code: <a href="https://github.com/windperson/DemoFibonacciBDN" class="uri">https://github.com/windperson/DemoFibonacciBDN</a></p>
</section>
<section id="example-project-structure" class="slide level2">
<h2>Example project structure</h2>

<img data-src="./BDN_tutorial/pics/microbenchmark_project_structure.png" class="r-stretch"><ul>
<li><code>FibonaccCore</code> project is a class library project, contains four Fibonacci Sequence generate algorithm.</li>
<li><code>FibSeqMicroBench</code> project is a console project that we write BDN benchmark test code here.</li>
</ul>
</section>
<section id="c-code" class="slide level2 smaller scrollable">
<h2>C# code</h2>
<ul>
<li>SequenceLib.cs file in <code>FibonaccCore</code> project:</li>
</ul>
<div class="sourceCode" id="cb7" data-code-line-numbers="8,36,53,64"><pre class="sourceCode numberSource csharp number-lines code-with-copy"><code class="sourceCode cs"><span id="cb7-1"><a href=""></a><span class="kw">public</span> <span class="kw">static</span> <span class="kw">class</span> SequenceLib</span>
<span id="cb7-2"><a href=""></a><span class="op">{</span></span>
<span id="cb7-3"><a href=""></a>    <span class="co">/// </span><span class="kw">&lt;summary&gt;</span></span>
<span id="cb7-4"><a href=""></a>    <span class="co">/// Calculate Fibonacci number using loop implementation</span></span>
<span id="cb7-5"><a href=""></a>    <span class="co">/// </span><span class="kw">&lt;/summary&gt;</span></span>
<span id="cb7-6"><a href=""></a>    <span class="co">/// </span><span class="kw">&lt;param</span><span class="ot"> name=</span><span class="dt">"n"</span><span class="kw">&gt;&lt;/param&gt;</span></span>
<span id="cb7-7"><a href=""></a>    <span class="co">/// </span><span class="kw">&lt;returns&gt;&lt;/returns&gt;</span></span>
<span id="cb7-8"><a href=""></a>    <span class="kw">public</span> <span class="kw">static</span> <span class="dt">int</span> <span class="fu">FibonacciUsingLoop</span><span class="op">(</span><span class="dt">int</span> n<span class="op">)</span></span>
<span id="cb7-9"><a href=""></a>    <span class="op">{</span></span>
<span id="cb7-10"><a href=""></a>        <span class="kw">if</span> <span class="op">(</span>n <span class="op">&lt;=</span> <span class="dv">1</span><span class="op">)</span></span>
<span id="cb7-11"><a href=""></a>        <span class="op">{</span></span>
<span id="cb7-12"><a href=""></a>            <span class="kw">return</span> n<span class="op">;</span></span>
<span id="cb7-13"><a href=""></a>        <span class="op">}</span></span>
<span id="cb7-14"><a href=""></a>        <span class="kw">else</span></span>
<span id="cb7-15"><a href=""></a>        <span class="op">{</span></span>
<span id="cb7-16"><a href=""></a>            <span class="dt">int</span> a <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb7-17"><a href=""></a>            <span class="dt">int</span> b <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb7-18"><a href=""></a>            <span class="dt">int</span> result <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb7-19"><a href=""></a></span>
<span id="cb7-20"><a href=""></a>            <span class="kw">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">2</span><span class="op">;</span> i <span class="op">&lt;=</span> n<span class="op">;</span> i<span class="op">++)</span></span>
<span id="cb7-21"><a href=""></a>            <span class="op">{</span></span>
<span id="cb7-22"><a href=""></a>                result <span class="op">=</span> a <span class="op">+</span> b<span class="op">;</span></span>
<span id="cb7-23"><a href=""></a>                a <span class="op">=</span> b<span class="op">;</span></span>
<span id="cb7-24"><a href=""></a>                b <span class="op">=</span> result<span class="op">;</span></span>
<span id="cb7-25"><a href=""></a>            <span class="op">}</span></span>
<span id="cb7-26"><a href=""></a></span>
<span id="cb7-27"><a href=""></a>            <span class="kw">return</span> result<span class="op">;</span></span>
<span id="cb7-28"><a href=""></a>        <span class="op">}</span></span>
<span id="cb7-29"><a href=""></a>    <span class="op">}</span></span>
<span id="cb7-30"><a href=""></a></span>
<span id="cb7-31"><a href=""></a>    <span class="co">/// </span><span class="kw">&lt;summary&gt;</span></span>
<span id="cb7-32"><a href=""></a>    <span class="co">/// Calculate Fibonacci number using recursion implementation</span></span>
<span id="cb7-33"><a href=""></a>    <span class="co">/// </span><span class="kw">&lt;/summary&gt;</span></span>
<span id="cb7-34"><a href=""></a>    <span class="co">/// </span><span class="kw">&lt;param</span><span class="ot"> name=</span><span class="dt">"n"</span><span class="kw">&gt;&lt;/param&gt;</span></span>
<span id="cb7-35"><a href=""></a>    <span class="co">/// </span><span class="kw">&lt;returns&gt;&lt;/returns&gt;</span></span>
<span id="cb7-36"><a href=""></a>    <span class="kw">public</span> <span class="kw">static</span> <span class="dt">int</span> <span class="fu">FibonacciUsingRecursion</span><span class="op">(</span><span class="dt">int</span> n<span class="op">)</span></span>
<span id="cb7-37"><a href=""></a>    <span class="op">{</span></span>
<span id="cb7-38"><a href=""></a>        <span class="kw">if</span> <span class="op">(</span>n <span class="op">&lt;=</span> <span class="dv">1</span><span class="op">)</span></span>
<span id="cb7-39"><a href=""></a>        <span class="op">{</span></span>
<span id="cb7-40"><a href=""></a>            <span class="kw">return</span> n<span class="op">;</span></span>
<span id="cb7-41"><a href=""></a>        <span class="op">}</span></span>
<span id="cb7-42"><a href=""></a>        <span class="kw">else</span></span>
<span id="cb7-43"><a href=""></a>        <span class="op">{</span></span>
<span id="cb7-44"><a href=""></a>            <span class="kw">return</span> <span class="fu">FibonacciUsingRecursion</span><span class="op">(</span>n <span class="op">-</span> <span class="dv">1</span><span class="op">)</span> <span class="op">*</span> <span class="fu">FibonacciUsingRecursion</span><span class="op">(</span>n<span class="dv">-2</span><span class="op">);</span></span>
<span id="cb7-45"><a href=""></a>        <span class="op">}</span></span>
<span id="cb7-46"><a href=""></a>    <span class="op">}</span></span>
<span id="cb7-47"><a href=""></a></span>
<span id="cb7-48"><a href=""></a>    <span class="co">/// </span><span class="kw">&lt;summary&gt;</span></span>
<span id="cb7-49"><a href=""></a>    <span class="co">/// Calculate Fibonacci number using Golden Ration approximation math formula</span></span>
<span id="cb7-50"><a href=""></a>    <span class="co">/// </span><span class="kw">&lt;/summary&gt;</span></span>
<span id="cb7-51"><a href=""></a>    <span class="co">/// </span><span class="kw">&lt;param</span><span class="ot"> name=</span><span class="dt">"n"</span><span class="kw">&gt;&lt;/param&gt;</span></span>
<span id="cb7-52"><a href=""></a>    <span class="co">/// </span><span class="kw">&lt;returns&gt;&lt;/returns&gt;</span></span>
<span id="cb7-53"><a href=""></a>    <span class="kw">public</span> <span class="kw">static</span> <span class="dt">int</span> <span class="fu">FibonacciUsingGoldenRatio</span><span class="op">(</span><span class="dt">int</span> n<span class="op">)</span></span>
<span id="cb7-54"><a href=""></a>    <span class="op">{</span></span>
<span id="cb7-55"><a href=""></a>        <span class="dt">double</span> phi <span class="op">=</span> <span class="op">(</span><span class="dv">1</span> <span class="op">+</span> Math<span class="op">.</span><span class="fu">Sqrt</span><span class="op">(</span><span class="dv">5</span><span class="op">))</span> <span class="op">/</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb7-56"><a href=""></a>        <span class="kw">return</span> <span class="op">(</span><span class="dt">int</span><span class="op">)</span>Math<span class="op">.</span><span class="fu">Round</span><span class="op">(</span>Math<span class="op">.</span><span class="fu">Pow</span><span class="op">(</span>phi<span class="op">,</span> n<span class="op">)</span> <span class="op">/</span> Math<span class="op">.</span><span class="fu">Sqrt</span><span class="op">(</span><span class="dv">5</span><span class="op">));</span></span>
<span id="cb7-57"><a href=""></a>    <span class="op">}</span></span>
<span id="cb7-58"><a href=""></a></span>
<span id="cb7-59"><a href=""></a>    <span class="co">/// </span><span class="kw">&lt;summary&gt;</span></span>
<span id="cb7-60"><a href=""></a>    <span class="co">/// Calculate Fibonacci number using Matrix Exponentiation ( https://www.nayuki.io/page/fast-fibonacci-algorithms )</span></span>
<span id="cb7-61"><a href=""></a>    <span class="co">/// </span><span class="kw">&lt;/summary&gt;</span></span>
<span id="cb7-62"><a href=""></a>    <span class="co">/// </span><span class="kw">&lt;param</span><span class="ot"> name=</span><span class="dt">"n"</span><span class="kw">&gt;&lt;/param&gt;</span></span>
<span id="cb7-63"><a href=""></a>    <span class="co">/// </span><span class="kw">&lt;returns&gt;&lt;/returns&gt;</span></span>
<span id="cb7-64"><a href=""></a>    <span class="kw">public</span> <span class="kw">static</span> <span class="dt">int</span> <span class="fu">FibonacciUsingMatrixExponentiation</span><span class="op">(</span><span class="dt">int</span> n<span class="op">)</span></span>
<span id="cb7-65"><a href=""></a>    <span class="op">{</span></span>
<span id="cb7-66"><a href=""></a>        <span class="kw">if</span> <span class="op">(</span>n <span class="op">&lt;=</span> <span class="dv">1</span><span class="op">)</span></span>
<span id="cb7-67"><a href=""></a>        <span class="op">{</span></span>
<span id="cb7-68"><a href=""></a>            <span class="kw">return</span> n<span class="op">;</span></span>
<span id="cb7-69"><a href=""></a>        <span class="op">}</span></span>
<span id="cb7-70"><a href=""></a></span>
<span id="cb7-71"><a href=""></a>        <span class="dt">int</span><span class="op">[,]</span> F <span class="op">=</span> <span class="op">{</span> <span class="op">{</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">1</span> <span class="op">},</span> <span class="op">{</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">0</span> <span class="op">}</span> <span class="op">};</span></span>
<span id="cb7-72"><a href=""></a>        <span class="fu">Power</span><span class="op">(</span>F<span class="op">,</span> n <span class="op">-</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb7-73"><a href=""></a></span>
<span id="cb7-74"><a href=""></a>        <span class="kw">return</span> F<span class="op">[</span><span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">];</span></span>
<span id="cb7-75"><a href=""></a>    <span class="op">}</span></span>
<span id="cb7-76"><a href=""></a></span>
<span id="cb7-77"><a href=""></a>    <span class="kw">private</span> <span class="kw">static</span> <span class="dt">void</span> <span class="fu">Power</span><span class="op">(</span><span class="dt">int</span><span class="op">[,]</span> F<span class="op">,</span> <span class="dt">int</span> n<span class="op">)</span></span>
<span id="cb7-78"><a href=""></a>    <span class="op">{</span></span>
<span id="cb7-79"><a href=""></a>        <span class="kw">if</span> <span class="op">(</span>n <span class="op">&lt;=</span> <span class="dv">1</span><span class="op">)</span></span>
<span id="cb7-80"><a href=""></a>        <span class="op">{</span></span>
<span id="cb7-81"><a href=""></a>            <span class="kw">return</span><span class="op">;</span></span>
<span id="cb7-82"><a href=""></a>        <span class="op">}</span></span>
<span id="cb7-83"><a href=""></a></span>
<span id="cb7-84"><a href=""></a>        <span class="dt">int</span><span class="op">[,]</span> M <span class="op">=</span> <span class="op">{</span> <span class="op">{</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">1</span> <span class="op">},</span> <span class="op">{</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">0</span> <span class="op">}</span> <span class="op">};</span></span>
<span id="cb7-85"><a href=""></a></span>
<span id="cb7-86"><a href=""></a>        <span class="fu">Power</span><span class="op">(</span>F<span class="op">,</span> n <span class="op">/</span> <span class="dv">2</span><span class="op">);</span></span>
<span id="cb7-87"><a href=""></a>        <span class="fu">Multiply</span><span class="op">(</span>F<span class="op">,</span> F<span class="op">);</span></span>
<span id="cb7-88"><a href=""></a></span>
<span id="cb7-89"><a href=""></a>        <span class="kw">if</span> <span class="op">(</span>n <span class="op">%</span> <span class="dv">2</span> <span class="op">!=</span> <span class="dv">0</span><span class="op">)</span></span>
<span id="cb7-90"><a href=""></a>        <span class="op">{</span></span>
<span id="cb7-91"><a href=""></a>            <span class="fu">Multiply</span><span class="op">(</span>F<span class="op">,</span> M<span class="op">);</span></span>
<span id="cb7-92"><a href=""></a>        <span class="op">}</span></span>
<span id="cb7-93"><a href=""></a>    <span class="op">}</span></span>
<span id="cb7-94"><a href=""></a>    </span>
<span id="cb7-95"><a href=""></a>    <span class="kw">private</span> <span class="kw">static</span> <span class="dt">void</span> <span class="fu">Multiply</span><span class="op">(</span><span class="dt">int</span><span class="op">[,]</span> F<span class="op">,</span> <span class="dt">int</span><span class="op">[,]</span> M<span class="op">)</span></span>
<span id="cb7-96"><a href=""></a>    <span class="op">{</span></span>
<span id="cb7-97"><a href=""></a>        <span class="dt">int</span> x <span class="op">=</span> F<span class="op">[</span><span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">]</span> <span class="op">*</span> M<span class="op">[</span><span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">]</span> <span class="op">+</span> F<span class="op">[</span><span class="dv">0</span><span class="op">,</span> <span class="dv">1</span><span class="op">]</span> <span class="op">*</span> M<span class="op">[</span><span class="dv">1</span><span class="op">,</span> <span class="dv">0</span><span class="op">];</span></span>
<span id="cb7-98"><a href=""></a>        <span class="dt">int</span> y <span class="op">=</span> F<span class="op">[</span><span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">]</span> <span class="op">*</span> M<span class="op">[</span><span class="dv">0</span><span class="op">,</span> <span class="dv">1</span><span class="op">]</span> <span class="op">+</span> F<span class="op">[</span><span class="dv">0</span><span class="op">,</span> <span class="dv">1</span><span class="op">]</span> <span class="op">*</span> M<span class="op">[</span><span class="dv">1</span><span class="op">,</span> <span class="dv">1</span><span class="op">];</span></span>
<span id="cb7-99"><a href=""></a>        <span class="dt">int</span> z <span class="op">=</span> F<span class="op">[</span><span class="dv">1</span><span class="op">,</span> <span class="dv">0</span><span class="op">]</span> <span class="op">*</span> M<span class="op">[</span><span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">]</span> <span class="op">+</span> F<span class="op">[</span><span class="dv">1</span><span class="op">,</span> <span class="dv">1</span><span class="op">]</span> <span class="op">*</span> M<span class="op">[</span><span class="dv">1</span><span class="op">,</span> <span class="dv">0</span><span class="op">];</span></span>
<span id="cb7-100"><a href=""></a>        <span class="dt">int</span> w <span class="op">=</span> F<span class="op">[</span><span class="dv">1</span><span class="op">,</span> <span class="dv">0</span><span class="op">]</span> <span class="op">*</span> M<span class="op">[</span><span class="dv">0</span><span class="op">,</span> <span class="dv">1</span><span class="op">]</span> <span class="op">+</span> F<span class="op">[</span><span class="dv">1</span><span class="op">,</span> <span class="dv">1</span><span class="op">]</span> <span class="op">*</span> M<span class="op">[</span><span class="dv">1</span><span class="op">,</span> <span class="dv">1</span><span class="op">];</span></span>
<span id="cb7-101"><a href=""></a></span>
<span id="cb7-102"><a href=""></a>        F<span class="op">[</span><span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">]</span> <span class="op">=</span> x<span class="op">;</span></span>
<span id="cb7-103"><a href=""></a>        F<span class="op">[</span><span class="dv">0</span><span class="op">,</span> <span class="dv">1</span><span class="op">]</span> <span class="op">=</span> y<span class="op">;</span></span>
<span id="cb7-104"><a href=""></a>        F<span class="op">[</span><span class="dv">1</span><span class="op">,</span> <span class="dv">0</span><span class="op">]</span> <span class="op">=</span> z<span class="op">;</span></span>
<span id="cb7-105"><a href=""></a>        F<span class="op">[</span><span class="dv">1</span><span class="op">,</span> <span class="dv">1</span><span class="op">]</span> <span class="op">=</span> w<span class="op">;</span></span>
<span id="cb7-106"><a href=""></a>    <span class="op">}</span></span>
<span id="cb7-107"><a href=""></a>    </span>
<span id="cb7-108"><a href=""></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="c-code-1" class="slide level2 smaller scrollable">
<h2>C# code</h2>
<ul>
<li>FibonacciSeqBenchmarks.cs file in <code>FibonaccCore</code> project:</li>
</ul>
<div class="sourceCode" id="cb8" data-code-line-numbers="6,9-10,12-16,18-22,24-28,30-34"><pre class="sourceCode numberSource csharp number-lines code-with-copy"><code class="sourceCode cs"><span id="cb8-1"><a href=""></a><span class="kw">using</span> BenchmarkDotNet<span class="op">.</span><span class="fu">Attributes</span><span class="op">;</span></span>
<span id="cb8-2"><a href=""></a><span class="kw">using</span> BenchmarkDotNet<span class="op">.</span><span class="fu">Engines</span><span class="op">;</span></span>
<span id="cb8-3"><a href=""></a></span>
<span id="cb8-4"><a href=""></a><span class="kw">namespace</span> FibSeqMicroBench<span class="op">;</span></span>
<span id="cb8-5"><a href=""></a></span>
<span id="cb8-6"><a href=""></a><span class="op">[</span><span class="fu">SimpleJob</span><span class="op">(</span>RunStrategy<span class="op">.</span><span class="fu">Throughput</span><span class="op">)]</span></span>
<span id="cb8-7"><a href=""></a><span class="kw">public</span> <span class="kw">class</span> FibonacciSeqBenchmarks</span>
<span id="cb8-8"><a href=""></a><span class="op">{</span></span>
<span id="cb8-9"><a href=""></a>    <span class="op">[</span><span class="fu">Params</span><span class="op">(</span><span class="dv">1</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="dv">10</span><span class="op">,</span> <span class="dv">20</span><span class="op">,</span> <span class="dv">50</span><span class="op">)]</span></span>
<span id="cb8-10"><a href=""></a>    <span class="kw">public</span> <span class="dt">int</span> Nth <span class="op">{</span> <span class="kw">get</span><span class="op">;</span> <span class="kw">set</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb8-11"><a href=""></a>    </span>
<span id="cb8-12"><a href=""></a>    <span class="op">[</span><span class="fu">Benchmark</span><span class="op">(</span>Baseline <span class="op">=</span> <span class="kw">true</span><span class="op">),</span> <span class="fu">BenchmarkCategory</span><span class="op">(</span><span class="st">"simple"</span><span class="op">)]</span></span>
<span id="cb8-13"><a href=""></a>    <span class="kw">public</span> <span class="dt">int</span> <span class="fu">FibSeqUsingLoop</span><span class="op">()</span></span>
<span id="cb8-14"><a href=""></a>    <span class="op">{</span></span>
<span id="cb8-15"><a href=""></a>        <span class="kw">return</span> FibonacciCore<span class="op">.</span><span class="fu">SequenceLib</span><span class="op">.</span><span class="fu">FibonacciUsingLoop</span><span class="op">(</span>Nth<span class="op">);</span></span>
<span id="cb8-16"><a href=""></a>    <span class="op">}</span></span>
<span id="cb8-17"><a href=""></a></span>
<span id="cb8-18"><a href=""></a>    <span class="op">[</span>Benchmark<span class="op">,</span> <span class="fu">BenchmarkCategory</span><span class="op">(</span><span class="st">"simple"</span><span class="op">,</span> <span class="st">"slow"</span><span class="op">)]</span></span>
<span id="cb8-19"><a href=""></a>    <span class="kw">public</span> <span class="dt">int</span> <span class="fu">FibSeqUsingRecursion</span><span class="op">()</span></span>
<span id="cb8-20"><a href=""></a>    <span class="op">{</span></span>
<span id="cb8-21"><a href=""></a>        <span class="kw">return</span> FibonacciCore<span class="op">.</span><span class="fu">SequenceLib</span><span class="op">.</span><span class="fu">FibonacciUsingRecursion</span><span class="op">(</span>Nth<span class="op">);</span></span>
<span id="cb8-22"><a href=""></a>    <span class="op">}</span></span>
<span id="cb8-23"><a href=""></a></span>
<span id="cb8-24"><a href=""></a>    <span class="op">[</span>Benchmark<span class="op">,</span> <span class="fu">BenchmarkCategory</span><span class="op">(</span><span class="st">"math"</span><span class="op">,</span> <span class="st">"approximate"</span><span class="op">)]</span></span>
<span id="cb8-25"><a href=""></a>    <span class="kw">public</span> <span class="dt">int</span> <span class="fu">FibSeqUsingGoldenRatio</span><span class="op">()</span></span>
<span id="cb8-26"><a href=""></a>    <span class="op">{</span></span>
<span id="cb8-27"><a href=""></a>        <span class="kw">return</span> FibonacciCore<span class="op">.</span><span class="fu">SequenceLib</span><span class="op">.</span><span class="fu">FibonacciUsingGoldenRatio</span><span class="op">(</span>Nth<span class="op">);</span></span>
<span id="cb8-28"><a href=""></a>    <span class="op">}</span></span>
<span id="cb8-29"><a href=""></a></span>
<span id="cb8-30"><a href=""></a>    <span class="op">[</span>Benchmark<span class="op">,</span> <span class="fu">BenchmarkCategory</span><span class="op">(</span><span class="st">"math"</span><span class="op">,</span> <span class="st">"fast"</span><span class="op">)]</span></span>
<span id="cb8-31"><a href=""></a>    <span class="kw">public</span> <span class="dt">int</span> <span class="fu">FibSeqUsingMatrixExponentiation</span><span class="op">()</span></span>
<span id="cb8-32"><a href=""></a>    <span class="op">{</span></span>
<span id="cb8-33"><a href=""></a>        <span class="kw">return</span> FibonacciCore<span class="op">.</span><span class="fu">SequenceLib</span><span class="op">.</span><span class="fu">FibonacciUsingMatrixExponentiation</span><span class="op">(</span>Nth<span class="op">);</span></span>
<span id="cb8-34"><a href=""></a>    <span class="op">}</span></span>
<span id="cb8-35"><a href=""></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>Program.cs file in <code>FibSeqMicroBench</code> project:</li>
</ul>
<div class="sourceCode" id="cb9" data-code-line-numbers="4"><pre class="sourceCode numberSource csharp number-lines code-with-copy"><code class="sourceCode cs"><span id="cb9-1"><a href=""></a><span class="kw">static</span> <span class="dt">void</span> <span class="fu">Main</span><span class="op">(</span><span class="dt">string</span><span class="op">[]</span> args<span class="op">)</span></span>
<span id="cb9-2"><a href=""></a><span class="op">{</span></span>
<span id="cb9-3"><a href=""></a>  <span class="dt">var</span> bdnConfig <span class="op">=</span> DefaultConfig<span class="op">.</span><span class="fu">Instance</span><span class="op">;</span></span>
<span id="cb9-4"><a href=""></a>  BenchmarkSwitcher<span class="op">.</span><span class="fu">FromAssembly</span><span class="op">(</span><span class="kw">typeof</span><span class="op">(</span>Program<span class="op">).</span><span class="fu">Assembly</span><span class="op">).</span><span class="fu">Run</span><span class="op">(</span>args<span class="op">,</span> bdnConfig<span class="op">);</span></span>
<span id="cb9-5"><a href=""></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="project-files" class="slide level2 smaller scrollable">
<h2>Project files</h2>
<ul>
<li><code>FibSeqMicroBench.csproj</code> file:</li>
</ul>
<div class="sourceCode" id="cb10" data-code-line-numbers="8-12,16,20"><pre class="sourceCode numberSource xml number-lines code-with-copy"><code class="sourceCode xml"><span id="cb10-1"><a href=""></a>&lt;<span class="kw">Project</span><span class="ot"> Sdk=</span><span class="st">"Microsoft.NET.Sdk"</span>&gt;</span>
<span id="cb10-2"><a href=""></a></span>
<span id="cb10-3"><a href=""></a>    &lt;<span class="kw">PropertyGroup</span>&gt;</span>
<span id="cb10-4"><a href=""></a>        &lt;<span class="kw">OutputType</span>&gt;Exe&lt;/<span class="kw">OutputType</span>&gt;</span>
<span id="cb10-5"><a href=""></a>        &lt;<span class="kw">TargetFramework</span>&gt;net8.0&lt;/<span class="kw">TargetFramework</span>&gt;</span>
<span id="cb10-6"><a href=""></a>        &lt;<span class="kw">ImplicitUsings</span>&gt;enable&lt;/<span class="kw">ImplicitUsings</span>&gt;</span>
<span id="cb10-7"><a href=""></a>        &lt;<span class="kw">Nullable</span>&gt;enable&lt;/<span class="kw">Nullable</span>&gt;</span>
<span id="cb10-8"><a href=""></a>        &lt;<span class="kw">Optimize</span>&gt;true&lt;/<span class="kw">Optimize</span>&gt;</span>
<span id="cb10-9"><a href=""></a>        &lt;<span class="kw">Configuration</span>&gt;release&lt;/<span class="kw">Configuration</span>&gt;</span>
<span id="cb10-10"><a href=""></a>        &lt;<span class="kw">IsPackable</span>&gt;false&lt;/<span class="kw">IsPackable</span>&gt;</span>
<span id="cb10-11"><a href=""></a>        &lt;<span class="kw">DebugType</span>&gt;pdbonly&lt;/<span class="kw">DebugType</span>&gt;</span>
<span id="cb10-12"><a href=""></a>        &lt;<span class="kw">DebugSymbols</span>&gt;true&lt;/<span class="kw">DebugSymbols</span>&gt;</span>
<span id="cb10-13"><a href=""></a>    &lt;/<span class="kw">PropertyGroup</span>&gt;</span>
<span id="cb10-14"><a href=""></a></span>
<span id="cb10-15"><a href=""></a>    &lt;<span class="kw">ItemGroup</span>&gt;</span>
<span id="cb10-16"><a href=""></a>      &lt;<span class="kw">ProjectReference</span><span class="ot"> Include=</span><span class="st">"..\..\FibonacciCore\FibonacciCore.csproj"</span> /&gt;</span>
<span id="cb10-17"><a href=""></a>    &lt;/<span class="kw">ItemGroup</span>&gt;</span>
<span id="cb10-18"><a href=""></a></span>
<span id="cb10-19"><a href=""></a>    &lt;<span class="kw">ItemGroup</span>&gt;</span>
<span id="cb10-20"><a href=""></a>      &lt;<span class="kw">PackageReference</span><span class="ot"> Include=</span><span class="st">"BenchmarkDotNet"</span><span class="ot"> Version=</span><span class="st">"0.14.0"</span> /&gt;</span>
<span id="cb10-21"><a href=""></a>    &lt;/<span class="kw">ItemGroup</span>&gt;</span>
<span id="cb10-22"><a href=""></a></span>
<span id="cb10-23"><a href=""></a>&lt;/<span class="kw">Project</span>&gt;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="project-file" class="slide level2 smaller scrollable">
<h2>Project file</h2>
<ul>
<li><code>FibonacciCore.csproj</code> file:</li>
</ul>
<div class="sourceCode" id="cb11" data-code-line-numbers="9-13"><pre class="sourceCode numberSource xml number-lines code-with-copy"><code class="sourceCode xml"><span id="cb11-1"><a href=""></a>&lt;<span class="kw">Project</span><span class="ot"> Sdk=</span><span class="st">"Microsoft.NET.Sdk"</span>&gt;</span>
<span id="cb11-2"><a href=""></a></span>
<span id="cb11-3"><a href=""></a>    &lt;<span class="kw">PropertyGroup</span>&gt;</span>
<span id="cb11-4"><a href=""></a>        &lt;<span class="kw">TargetFramework</span>&gt;net8.0&lt;/<span class="kw">TargetFramework</span>&gt;</span>
<span id="cb11-5"><a href=""></a>        &lt;<span class="kw">ImplicitUsings</span>&gt;enable&lt;/<span class="kw">ImplicitUsings</span>&gt;</span>
<span id="cb11-6"><a href=""></a>        &lt;<span class="kw">Nullable</span>&gt;enable&lt;/<span class="kw">Nullable</span>&gt;</span>
<span id="cb11-7"><a href=""></a>    &lt;/<span class="kw">PropertyGroup</span>&gt;</span>
<span id="cb11-8"><a href=""></a></span>
<span id="cb11-9"><a href=""></a>    &lt;<span class="kw">PropertyGroup</span><span class="ot"> Condition=</span><span class="st">" '$(Configuration)' == 'Release' "</span>&gt;</span>
<span id="cb11-10"><a href=""></a>        &lt;<span class="kw">Optimize</span>&gt;true&lt;/<span class="kw">Optimize</span>&gt;</span>
<span id="cb11-11"><a href=""></a>        &lt;<span class="kw">DebugType</span>&gt;pdbonly&lt;/<span class="kw">DebugType</span>&gt;</span>
<span id="cb11-12"><a href=""></a>        &lt;<span class="kw">DebugSymbols</span>&gt;true&lt;/<span class="kw">DebugSymbols</span>&gt;</span>
<span id="cb11-13"><a href=""></a>    &lt;/<span class="kw">PropertyGroup</span>&gt;</span>
<span id="cb11-14"><a href=""></a></span>
<span id="cb11-15"><a href=""></a>&lt;/<span class="kw">Project</span>&gt;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="run-the-microbenchmark" class="slide level2">
<h2>Run the microbenchmark</h2>
<p>At first you may attempt to run the benchmark with <code>dotnet run -c Release</code> command directly inside the <em>FibSeqMicroBench</em> folder, but you will get an error message like this:</p>

<img data-src="./BDN_tutorial/pics/not_release_mode_error_on_starting_microbenchmark_project.png" class="r-stretch"><p>This is due to BDN default wants to run benchmark using optimized build, and by design of .NET Core SDK, if you don’t specify the solution file but just run the command in the project folder, the dependency project will not be built in optimized mode.</p>
<p>So you need to execuate the <code>dotnet run</code> command in the solution folder.</p>
<p>(See readme file in the github project root folder)</p>
</section>
<section id="run-the-microbenchmark-with-arguments" class="slide level2 smaller scrollable">
<h2>Run the microbenchmark with arguments</h2>
<p>You can invoke some BDN command line arguments to control the benchmark running behavior:</p>
<ul>
<li><code>-f --filter</code> : filter the benchmark cases to run.</li>
<li><code>--list tree</code> or <code>--list flat</code> : list all benchmark cases. <img data-src="./BDN_tutorial/pics/list_microbenchmark_project_tests.png"></li>
<li><code>--help</code> : show help message. <img data-src="./BDN_tutorial/pics/get_microbenchmark_project_help.png"></li>
</ul>
</section>
<section id="run-the-microbenchmark-1" class="slide level2 scrollable">
<h2>Run the microbenchmark</h2>

<img data-src="./BDN_tutorial/pics/run_fibSeq_micro-benchmark.png" class="r-stretch"></section>
<section id="finish-microbenchmark" class="slide level2 scrollable">
<h2>Finish microbenchmark</h2>

<img data-src="./BDN_tutorial/pics/done_fibSeq_micro-benchmark.png" class="r-stretch"></section>
<section id="conclusion" class="slide level2">
<h2>Conclusion</h2>
<ul>
<li>BenchmarkDotNET is a powerful tool for measuring the performance of your code.</li>
<li>It is easy to write benchmarks with BDN.</li>
<li>You can abandon the test via throwing an exception in the benchmark method.</li>
</ul>
</section>
<section id="opensource-projects-that-use-bdn" class="slide level2 smaller scrollable">
<h2>Opensource projects that use BDN:</h2>
<p>Micro Benchmarks of PowerShell 7:<br>
<a href="https://github.com/PowerShell/PowerShell/tree/master/test/perf/benchmarks" class="uri">https://github.com/PowerShell/PowerShell/tree/master/test/perf/benchmarks</a></p>
<p>dotnet performance test using BDN to do micro benchmark:<br>
<a href="https://github.com/dotnet/performance/blob/main/src/benchmarks/micro/README.md" class="uri">https://github.com/dotnet/performance/blob/main/src/benchmarks/micro/README.md</a></p>
<p>The dotnet runtime benchmark tool Microsoft.Crank can combine using BDN to do micro benchmark:<br>
<a href="https://github.com/dotnet/crank/blob/main/docs/microbenchmarks.md" class="uri">https://github.com/dotnet/crank/blob/main/docs/microbenchmarks.md</a></p>
<p>C# Open-Telemetry SDK core component benchmark:<br>
<a href="https://github.com/open-telemetry/opentelemetry-dotnet/tree/main/test/Benchmarks" class="uri">https://github.com/open-telemetry/opentelemetry-dotnet/tree/main/test/Benchmarks</a></p>
<p>.NET MAUI performance test:<br>
<a href="https://github.com/dotnet/maui/tree/main/src/Core/tests/Benchmarks.Droid" class="uri">https://github.com/dotnet/maui/tree/main/src/Core/tests/Benchmarks.Droid</a></p>
<p>Benchmark on ASP.NET Core Orleans:<br>
<a href="https://github.com/dotnet/orleans/tree/main/test/Benchmarks" class="uri">https://github.com/dotnet/orleans/tree/main/test/Benchmarks</a></p>
<p>Benchmark on Dapper:<br>
<a href="https://github.com/DapperLib/Dapper/tree/main/benchmarks/Dapper.Tests.Performance" class="uri">https://github.com/DapperLib/Dapper/tree/main/benchmarks/Dapper.Tests.Performance</a></p>
<p>Math library benchmark of Silk.NET:<br>
<a href="https://github.com/dotnet/Silk.NET/tree/main/src/Maths/Silk.NET.Maths.Benchmarks" class="uri">https://github.com/dotnet/Silk.NET/tree/main/src/Maths/Silk.NET.Maths.Benchmarks</a></p>
<p>Benchmark ML.NET:<br>
<a href="https://github.com/dotnet/machinelearning/tree/main/test/Microsoft.ML.PerformanceTests" class="uri">https://github.com/dotnet/machinelearning/tree/main/test/Microsoft.ML.PerformanceTests</a></p>
<p>ComputeSharp’s various Benchmarks project:<br>
<a href="https://github.com/Sergio0694/ComputeSharp/tree/main/samples/ComputeSharp.Benchmark" class="uri">https://github.com/Sergio0694/ComputeSharp/tree/main/samples/ComputeSharp.Benchmark</a></p>
</section></section>
<section>
<section id="use-bdn-on-various-c-applications" class="title-slide slide level1 center">
<h1>Use BDN on various C# applications</h1>

</section>
<section id="use-bdn-on-asp.net-core-web-api" class="slide level2">
<h2>Use BDN on ASP.NET Core Web API</h2>
<p>(TBD)</p>
<div class="quarto-auto-generated-content">
<div class="footer footer-default">

</div>
</div>
</section></section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="index_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="index_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="index_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="index_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="index_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="index_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="index_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="index_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="index_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="index_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"right","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: false,

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1200,

        height: 900,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const onCopySuccess = function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      }
      const getTextToCopy = function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
        text: getTextToCopy
      });
      clipboard.on('success', onCopySuccess);
      if (window.document.getElementById('quarto-embedded-source-code-modal')) {
        // For code content inside modals, clipBoardJS needs to be initialized with a container option
        // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
        const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
          text: getTextToCopy,
          container: window.document.getElementById('quarto-embedded-source-code-modal')
        });
        clipboardModal.on('success', onCopySuccess);
      }
        var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
        var mailtoRegex = new RegExp(/^mailto:/);
          var filterRegex = new RegExp('/' + window.location.host + '/');
        var isInternal = (href) => {
            return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
        }
        // Inspect non-navigation links and adorn them if external
     	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
        for (var i=0; i<links.length; i++) {
          const link = links[i];
          if (!isInternal(link.href)) {
            // undo the damage that might have been done by quarto-nav.js in the case of
            // links that we want to consider external
            if (link.dataset.originalHref !== undefined) {
              link.href = link.dataset.originalHref;
            }
          }
        }
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note) {
            return note.innerHTML;
          } else {
            return "";
          }
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>